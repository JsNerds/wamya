(this["webpackJsonpwamya-smart-delivery"]=this["webpackJsonpwamya-smart-delivery"]||[]).push([[13],{1472:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(181),l=t(6),s=t.n(l),i=t(13),m=t(5),o=t(15),d=(t(51),t(1407)),u=t(1421),v=t(1444),p=t(1425),E=t(1422),h=t(1372),b=t(19),N=t(33),f=t(27),g=t.n(f);t(511),t(269),t(512);function x(e){var a=Object(N.g)(),t=Object(n.useState)(),c=Object(m.a)(t,2),l=(c[0],c[1],Object(n.useState)()),f=Object(m.a)(l,2),x=f[0],y=f[1],w=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("http://localhost:3000/delivery/").then((function(e){console.log(e.data),y(e.data)}));case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){w();var e=setInterval((function(){w()}),1e3);return function(){return clearInterval(e)}}),[]);var k=function(){var e=Object(i.a)(s.a.mark((function e(a){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)("delivery/cancelDelivery/".concat(a),null,"PUT",!1);case 2:t=e.sent,n=Object(m.a)(t,2),n[1]||console.log("deleted");case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),O=function(e){return 0==e.deliv.state?r.a.createElement("div",{className:"h-auto py-0 px-3 badge badge-warning"},"pending"):e.deliv.state<4&&e.deliv.state>0?r.a.createElement("div",{className:"h-auto py-0 px-3 badge badge-warning"},"On going"):-1==e.deliv.state?r.a.createElement("div",{className:"h-auto py-0 px-3 badge badge-danger"},"Canceled"):r.a.createElement("div",{className:"h-auto py-0 px-3 badge badge-success"},"Finished")};return r.a.createElement(n.Fragment,null,r.a.createElement(u.a,{className:"card-box mb-4"},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-header--title"},r.a.createElement("small",null,"Tables"),r.a.createElement("b",null,"Deliveries")),r.a.createElement(v.a,{className:"card-header--actions"},r.a.createElement(p.a,{size:"small",color:"primary",className:"text-primary",title:"View details"},r.a.createElement(o.a,{icon:["far","keyboard"],className:"font-size-lg"})))),r.a.createElement(E.a,{className:"p-0"},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-striped table-hover text-nowrap mb-0"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},"Source"),r.a.createElement("th",{className:"text-center"},"destination"),r.a.createElement("th",{className:"text-center"},"Status"),r.a.createElement("th",{className:"text-center"},"Type of package"),r.a.createElement("th",{className:"text-center"},"driver"),r.a.createElement("th",{className:"text-center"},"Actions"),r.a.createElement("th",{className:"text-center"}))),r.a.createElement("tbody",null,null===x||void 0===x?void 0:x.map((function(e){return r.a.createElement("tr",{key:null===e||void 0===e?void 0:e._id},r.a.createElement("td",{className:"text-center"},r.a.createElement("div",{className:"h-auto py-0 px-3"},null===e||void 0===e?void 0:e.sourceAddress.City)),r.a.createElement("td",{className:"text-center"},r.a.createElement("div",{className:"h-auto py-0 px-3"},null===e||void 0===e?void 0:e.destinationAddress[0].City)),r.a.createElement("td",{className:"text-center"},r.a.createElement(O,{deliv:e})),r.a.createElement("td",{className:"text-center"},r.a.createElement("div",{className:"h-auto py-0 px-3"},null===e||void 0===e?void 0:e.package[0].type)),r.a.createElement("td",{className:"text-center"},null===e||void 0===e?void 0:e.driver.Username),r.a.createElement("td",{className:"text-center"},r.a.createElement(d.a,{size:"small",variant:"contained",color:"secondary",onClick:function(){k(e._id)}},"Cancel Delivery")),r.a.createElement("td",{className:"text-center"},r.a.createElement(h.a,{arrow:!0,title:"View Details"},r.a.createElement(p.a,{size:"small",variant:"outlined",color:"primary",onClick:function(){var t;t=e._id,a.replace("/DeliveryDetails/"+t)}},r.a.createElement(o.a,{icon:["fas","arrow-right"]})))))}))))))))}function y(){return r.a.createElement(n.Fragment,null,r.a.createElement(c.d,{titleHeading:"Packages",titleDescription:"Wonderful animated charts built with ApexCharts components."}),r.a.createElement(c.a,{sectionHeading:"Packages Table"},r.a.createElement(x,null)))}t.d(a,"default",(function(){return y}))}}]);
//# sourceMappingURL=13.36103a82.chunk.js.map