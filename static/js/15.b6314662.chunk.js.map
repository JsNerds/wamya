{"version":3,"sources":["components/back/EntreprisesTable.js","components/back/CompanyStats.js","pages/back/Entreprises.js"],"names":["EntreprisesTable","props","history","useHistory","deleteCompany","id","a","queryServerApi","err","console","log","go","Card","className","Tooltip","arrow","title","IconButton","size","color","icon","spin","CardContent","companies","map","company","index","key","Denomination","href","onClick","e","preventDefault","ResponsibleName","ResponsibleCin","Date","parse","SubscriptionExpirationDate","now","Subscribed","Email","HeadquartersAddress","City","Street","PhoneNumber","Button","variant","replace","_id","UpdateCompany","CompanyStats","seriesMixedChart","name","data","length","reduce","total","item","payments","totalPayments","deliveries","totalDeliveries","Grid","container","spacing","xs","md","options","xaxis","categories","series","type","Entreprises","useServerApi","titleHeading","titleDescription","sectionHeading","subs"],"mappings":"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","file":"static/js/15.b6314662.chunk.js","sourcesContent":["import React, { Fragment } from 'react';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nimport {\r\n    IconButton,\r\n    Card,\r\n    CardContent,\r\n    Button,\r\n    Tooltip\r\n} from '@material-ui/core';\r\nimport {queryServerApi} from \"../../utils/queryServerApi\";\r\nimport {useHistory} from \"react-router\";\r\n\r\nexport default function EntreprisesTable(props) {\r\n    const history = useHistory();\r\n\r\n\r\n    const UpdateCompany= (company) =>{\r\n        history.replace(\"/UpdateCompany/\"+ company._id)\r\n    }\r\n    const Details= (id) =>{\r\n        history.replace(\"/CompanyDetails/\"+ id)\r\n    }\r\n\r\n\r\n    const deleteCompany = async (id) => {\r\n        const [err] = await queryServerApi(\"entreprises/remove/\" + id, {}, \"DELETE\");\r\n        if (err) {\r\n            console.log(err);\r\n        } history.go(0);\r\n    };\r\n\r\n    return (\r\n        <Fragment>\r\n            <Card className=\"card-box mb-4\">\r\n                <div className=\"card-header pr-2\">\r\n                    <div className=\"card-header--title\">Employees status</div>\r\n                    <div className=\"card-header--actions\">\r\n                        <Tooltip arrow title=\"Refresh\">\r\n                            <IconButton size=\"small\" color=\"primary\" className=\"mr-3\">\r\n                                <FontAwesomeIcon icon={['fas', 'cog']} spin />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    </div>\r\n                </div>\r\n                <CardContent className=\"p-3\">\r\n                    <div className=\"table-responsive\">\r\n                        <table className=\"table table-borderless table-hover text-nowrap mb-0\">\r\n                            <thead>\r\n                            <tr>\r\n                                <th>Denomination</th>\r\n                                <th className=\"text-left\">Responsible</th>\r\n                                <th className=\"text-center\">Subscription</th>\r\n                                <th className=\"text-center\">Email</th>\r\n                                <th className=\"text-center\">Headquarters Address</th>\r\n                                <th className=\"text-center\">Phone Number</th>\r\n                                <th className=\"text-center\">Actions</th>\r\n                                <th className=\"text-center\"></th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            {props.companies?.map((company,index) => (\r\n                                <tr key={index}>\r\n                                    <td>\r\n                                        {company.Denomination}\r\n                                    </td>\r\n                                    <td>\r\n                                        <div>\r\n                                            <a\r\n                                                href=\"#/\"\r\n                                                onClick={e => e.preventDefault()}\r\n                                                className=\"font-weight-bold text-black\"\r\n                                                title=\"...\">\r\n                                                {company.ResponsibleName}\r\n                                            </a>\r\n                                            <span className=\"text-black-50 d-block\">\r\n                                           CIN : {company.ResponsibleCin}\r\n                                        </span>\r\n                                        </div>\r\n                                    </td>\r\n\r\n                                    {Date.parse(company.SubscriptionExpirationDate) > Date.now() && company.Subscribed? (\r\n                                        <td className=\"text-center\">\r\n                                            <div className=\"badge badge-success px-4\">Subscribed</div>\r\n                                        </td>\r\n                                    ):\r\n                                        <td className=\"text-center\">\r\n                                            <div className=\"badge badge-danger px-4\">Expired</div>\r\n                                        </td>\r\n                                    }\r\n\r\n                                    <td>\r\n                                        {company.Email}\r\n                                    </td>\r\n\r\n                                    <td>\r\n                                        {company.HeadquartersAddress.City} , {company.HeadquartersAddress.Street}\r\n                                    </td>\r\n\r\n                                    <td>\r\n                                        {company.PhoneNumber}\r\n                                    </td>\r\n                                    <td className=\"text-center\">\r\n                                        <Button\r\n                                            size=\"small\"\r\n                                            variant=\"contained\"\r\n                                            className=\"mr-3\"\r\n                                            color=\"primary\" onClick={() => UpdateCompany(company) }>\r\n                                            Update\r\n                                        </Button>\r\n                                        <Button size=\"small\" variant=\"contained\" color=\"secondary\" onClick={()=> deleteCompany(company._id)}>\r\n                                            Delete\r\n                                        </Button>\r\n                                    </td>\r\n\r\n                                    <td className=\"text-center\">\r\n                                        <Tooltip arrow title=\"View Details\">\r\n                                            <IconButton\r\n                                                size=\"small\"\r\n                                                variant=\"outlined\"\r\n                                                color=\"primary\"\r\n                                                onClick={()=>Details(company._id)}>\r\n                                                <FontAwesomeIcon icon={['fas', 'arrow-right']} />\r\n                                            </IconButton>\r\n                                        </Tooltip>\r\n                                    </td>\r\n\r\n                                </tr>\r\n                            ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </CardContent>\r\n                <div className=\"card-footer d-flex justify-content-between\">\r\n                    <Button color=\"primary\" size=\"small\">\r\n                        Delete All\r\n                    </Button>\r\n                </div>\r\n            </Card>\r\n        </Fragment>\r\n    );\r\n}\r\n","import React, {Fragment} from 'react';\r\nimport { Grid} from '@material-ui/core';\r\nimport Chart from 'react-apexcharts';\r\n\r\n\r\n\r\nexport default function CompanyStats(props) {\r\n    function totalPayments() {\r\n        return props.company?.reduce(function(total, item) {\r\n            total += item?.payments.length;\r\n\r\n            return total;\r\n        }, 0);\r\n    }\r\n\r\n    function totalDeliveries() {\r\n        return props.company?.reduce(function(total, item) {\r\n            total += item?.deliveries.length;\r\n\r\n            return total;\r\n        }, 0);\r\n    }\r\n\r\n    const options = {\r\n        xaxis: {\r\n            categories: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']\r\n        }\r\n    };\r\n    const seriesMixedChart = [\r\n        {\r\n            name: 'Subscriptions',\r\n            data: [0,props.company?.length]\r\n        },\r\n        {\r\n            name: 'Payments',\r\n            data: [0,totalPayments()]\r\n        },\r\n        {\r\n            name: 'Packages',\r\n            data: [0, totalDeliveries()]\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <Fragment>\r\n\r\n            <Grid container spacing={4}>\r\n                <Grid item xs={12} md={6}>\r\n                <Fragment>\r\n                    <Chart options={options} series={seriesMixedChart} type=\"area\" />\r\n                </Fragment>\r\n                </Grid>\r\n            </Grid>\r\n\r\n        </Fragment>\r\n    );\r\n}\r\n","import React, { Fragment } from 'react';\r\n\r\nimport {ExampleWrapperSeamless, PageTitle} from '../../layout-componentsBack';\r\nimport EntreprisesTable from \"../../components/back/EntreprisesTable\";\r\nimport {useServerApi} from \"../../hooks/useServerApi\";\r\nimport CompanyStats from \"../../components/back/CompanyStats\";\r\nexport default function Entreprises() {\r\n    const [companies] = useServerApi(\"entreprises\");\r\n\r\n    return (\r\n        <Fragment>\r\n            <PageTitle\r\n                titleHeading=\"Comapnies\"\r\n                titleDescription=\"Wonderful animated charts built with ApexCharts components.\"\r\n            />\r\n            <ExampleWrapperSeamless sectionHeading=\"Comapnies Table\">\r\n                <EntreprisesTable companies={companies}/>\r\n                <CompanyStats company={companies} subs={companies?.length}/>\r\n            </ExampleWrapperSeamless>\r\n        </Fragment>\r\n    );\r\n}\r\n"],"sourceRoot":""}