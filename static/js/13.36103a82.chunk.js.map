{"version":3,"sources":["components/back/DeliveriesTable.js","pages/back/Deliveries.js"],"names":["DeliveriesTable","props","history","useHistory","useState","deliveryList","setDeliveryList","getAllDeliveriesForCustomer","a","axios","get","then","doc","console","log","data","error","message","useEffect","interval","setInterval","clearInterval","handleDelete","id","queryServerApi","DeliveryState","deliv","state","className","Card","Box","IconButton","size","color","title","icon","CardContent","map","delivery","key","_id","sourceAddress","City","destinationAddress","package","type","driver","Username","Button","variant","onClick","Tooltip","arrow","replace","Deliveries","titleHeading","titleDescription","sectionHeading"],"mappings":"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","file":"static/js/13.36103a82.chunk.js","sourcesContent":["import React, { useState, Fragment, useEffect } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { useServerApi } from \"../../hooks/useServerApi\";\r\nimport { Menu, MenuItem, Button } from \"@material-ui/core\";\r\nimport { Avatar, IconButton, Box, Card, CardContent, Tooltip } from \"@material-ui/core\";\r\nimport { queryServerApi } from \"../../utils/queryServerApi\";\r\nimport { useHistory } from 'react-router-dom'\r\nimport axios from 'axios'\r\n\r\nimport avatar1 from \"../../assets/images/avatars/avatar1.jpg\";\r\nimport avatar2 from \"../../assets/images/avatars/avatar2.jpg\";\r\nimport avatar3 from \"../../assets/images/avatars/avatar3.jpg\";\r\nexport default function DeliveriesTable(props) {\r\n  const history = useHistory();\r\n  const [deliveries, setDeliveries] = useState();\r\n  const [deliveryList,setDeliveryList] = useState();\r\n  const Details= (id) =>{\r\n    history.replace(\"/DeliveryDetails/\"+ id)\r\n}\r\n    const getAllDeliveriesForCustomer= async () => {\r\n        try {\r\n          const Delivery = await axios.get(\r\n            \"http://localhost:3000/delivery/\"\r\n          ).then(function(doc){\r\n                console.log(doc.data)\r\n                setDeliveryList(doc.data)\r\n          });\r\n           // set State\r\n        } catch (err) {\r\n          console.error(err.message);\r\n        }\r\n      };\r\n      useEffect(() => {\r\n        getAllDeliveriesForCustomer();\r\n        const interval = setInterval(() => {\r\n            getAllDeliveriesForCustomer();\r\n        }, 1000);\r\n        return () => clearInterval(interval);\r\n      }, []);\r\n\r\n  const handleDelete = async (id) => {\r\n    const [, err] = await queryServerApi(\r\n      `delivery/cancelDelivery/${id}`,\r\n      null,\r\n      \"PUT\",\r\n      false\r\n    );\r\n    if (err) {\r\n      //setShowLoader(false);\r\n    } else console.log(\"deleted\")\r\n  };\r\n  const handleDetail = async (id) => {\r\n    \r\n  };\r\n  const DeliveryState = (props) => {\r\n    if ( props.deliv.state == 0) {\r\n      return (\r\n        <div className=\"h-auto py-0 px-3 badge badge-warning\">\r\n                        pending\r\n                      </div> \r\n      );\r\n    } else if (props.deliv.state < 4 && props.deliv.state >0 ) {\r\n      return (\r\n        <div className=\"h-auto py-0 px-3 badge badge-warning\">\r\n                        On going\r\n                      </div> \r\n      );\r\n    } else if(props.deliv.state == -1) {\r\n      return (\r\n        <div className=\"h-auto py-0 px-3 badge badge-danger\">\r\n                      Canceled\r\n                    </div>\r\n      );\r\n    }\r\n    else{\r\n      return (\r\n        <div className=\"h-auto py-0 px-3 badge badge-success\">\r\n                      Finished\r\n                    </div>\r\n      );\r\n    }\r\n  }\r\n  return (\r\n    <Fragment>\r\n      <Card className=\"card-box mb-4\">\r\n        <div className=\"card-header\">\r\n          <div className=\"card-header--title\">\r\n            <small>Tables</small>\r\n            <b>Deliveries</b>\r\n          </div>\r\n          <Box className=\"card-header--actions\">\r\n            <IconButton\r\n              size=\"small\"\r\n              color=\"primary\"\r\n              className=\"text-primary\"\r\n              title=\"View details\"\r\n            >\r\n              <FontAwesomeIcon\r\n                icon={[\"far\", \"keyboard\"]}\r\n                className=\"font-size-lg\"\r\n              />\r\n            </IconButton>\r\n          </Box>\r\n        </div>\r\n        <CardContent className=\"p-0\">\r\n          <div className=\"table-responsive\">\r\n            <table className=\"table table-striped table-hover text-nowrap mb-0\">\r\n              <thead className=\"thead-light\">\r\n                <tr>\r\n                  <th className=\"text-center\">Source</th>\r\n                  <th className=\"text-center\">destination</th>\r\n                  <th className=\"text-center\">Status</th>\r\n                  <th className=\"text-center\">Type of package</th>\r\n                  <th className=\"text-center\">driver</th>\r\n                  <th className=\"text-center\">Actions</th>\r\n                  <th className=\"text-center\"></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {deliveryList?.map((delivery) => {\r\n                  return (\r\n                  <tr key={delivery?._id}>\r\n                     <td className=\"text-center\">\r\n                      <div className=\"h-auto py-0 px-3\">\r\n                        {delivery?.sourceAddress.City}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"text-center\">\r\n                      <div className=\"h-auto py-0 px-3\">\r\n                        {delivery?.destinationAddress[0].City}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"text-center\">\r\n                    <DeliveryState deliv={delivery}/>\r\n                    </td>\r\n                    <td className=\"text-center\">\r\n                      <div className=\"h-auto py-0 px-3\">\r\n                      {delivery?.package[0].type}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"text-center\">\r\n                    {delivery?.driver.Username}\r\n                    </td>\r\n                    <td className=\"text-center\">   \r\n                                        <Button size=\"small\" variant=\"contained\" color=\"secondary\" onClick={()=> {handleDelete(delivery._id)}}>\r\n                                            Cancel Delivery\r\n                                        </Button>\r\n                                    </td>\r\n                                    <td className=\"text-center\">\r\n                                        <Tooltip arrow title=\"View Details\">\r\n                                            <IconButton\r\n                                                size=\"small\"\r\n                                                variant=\"outlined\"\r\n                                                color=\"primary\"\r\n                                                onClick={()=>{Details(delivery._id)}}\r\n                                            >\r\n                                                <FontAwesomeIcon icon={['fas', 'arrow-right']} />\r\n                                            </IconButton>\r\n                                        </Tooltip>\r\n                                    </td>\r\n                  </tr>)\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment } from 'react';\r\n\r\nimport {ExampleWrapperSeamless, PageTitle} from '../../layout-componentsBack';\r\nimport DeliveriesTable from \"../../components/back/DeliveriesTable\";\r\nexport default function Deliveries() {\r\n    return (\r\n        <Fragment>\r\n            <PageTitle\r\n                titleHeading=\"Packages\"\r\n                titleDescription=\"Wonderful animated charts built with ApexCharts components.\"\r\n            />\r\n            <ExampleWrapperSeamless sectionHeading=\"Packages Table\">\r\n                <DeliveriesTable/>\r\n            </ExampleWrapperSeamless>\r\n        </Fragment>\r\n    );\r\n}\r\n"],"sourceRoot":""}