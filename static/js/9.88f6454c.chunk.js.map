{"version":3,"sources":["components/back/CustomersCharts.js","components/back/CustomerStat.js","components/back/CustomersTable.js","pages/back/Customers.js"],"names":["CustomersCharts","props","series","name","data","customers","reduce","total","item","payments","length","deliveries","options","xaxis","categories","type","CustomerStat","Grid","container","spacing","xs","md","Card","className","CardContent","Divider","sectionHeading","CustomersTable","history","useHistory","deleteCustomer","id","a","queryServerApi","err","console","log","go","useEffect","Box","IconButton","size","color","title","icon","style","width","map","customer","index","key","Avatar","alt","src","process","img","href","onClick","e","preventDefault","FirstName","LastName","Cin","UserName","Email","Adress","Street","City","PhoneNumber","Button","variant","replace","_id","UpdateCustomer","Tooltip","arrow","Customers","useState","setCustomers","getCustomers","axios","get","then","doc","JSON","stringify","error","message","interval","setInterval","clearInterval","titleHeading","titleDescription"],"mappings":"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","file":"static/js/9.88f6454c.chunk.js","sourcesContent":["import React, {Fragment, useEffect} from 'react';\r\n\r\nimport Chart from 'react-apexcharts';\r\n\r\nexport default function CustomersCharts(props) {\r\n\r\n    const options = {\r\n        xaxis: {\r\n            categories: ['debut', 'Now']\r\n        }\r\n    };\r\n\r\n\r\n\r\n    function totalPayments() {\r\n        return props.customers.reduce(function(total, item) {\r\n            total += item?.payments.length;\r\n            return total;\r\n        }, 0);\r\n    }\r\n\r\n\r\n    function totalDeliveries() {\r\n        return props.customers.reduce(function(total, item) {\r\n            total += item?.deliveries.length;\r\n\r\n            return total;\r\n        }, 0);\r\n    }\r\n\r\n    let series = [\r\n        {\r\n            name: 'Payments',\r\n            data: [0,totalPayments()]\r\n        },\r\n        {\r\n            name: 'Deliveries',\r\n            data: [0,totalDeliveries()]\r\n        }\r\n\r\n    ];\r\n\r\n    return (\r\n        <Fragment>\r\n            <Chart options={options} series={series} type=\"area\" />\r\n        </Fragment>\r\n    );\r\n}\r\n","import React, {Fragment} from 'react';\r\nimport { Grid, Card, CardContent, Divider } from '@material-ui/core';\r\nimport {ExampleWrapperSimple} from \"../../layout-componentsBack\";\r\nimport ApexChartsArea from \"../../componentsBack/ApexCharts/ApexChartsArea\";\r\nimport CustomersCharts from \"./CustomersCharts\";\r\n\r\n\r\n\r\nexport default function CustomerStat(props) {\r\n    const customers = props.customers;\r\n    function totalPayments() {\r\n        return props.customers.reduce(function(total, item) {\r\n            total += item?.payments.length;\r\n\r\n            return total;\r\n        }, 0);\r\n    }\r\n\r\n    function totalDeliveries() {\r\n        return props.customers.reduce(function(total, item) {\r\n            total += item?.deliveries.length;\r\n\r\n            return total;\r\n        }, 0);\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n\r\n            <Grid container spacing={4}>\r\n                <Grid item xs={12} md={6}>\r\n                    <Card className=\"card-box mb-4\">\r\n                        <div className=\"card-header\">\r\n                            <h4 className=\"font-size-lg mb-0 py-2 font-weight-bold\">\r\n                                Informations\r\n                            </h4>\r\n                        </div>\r\n                        <CardContent className=\"p-3\">\r\n                            <div className=\"d-flex align-items-center justify-content-between p-3\">\r\n                                <div>\r\n                                    <b>Payments</b>\r\n                                    <div className=\"text-black-50\">Number of customer's payments</div>\r\n                                </div>\r\n                                <div className=\"font-weight-bold text-danger font-size-xl\">\r\n                                    {totalPayments()}\r\n                                </div>\r\n                            </div>\r\n                            <Divider />\r\n                            <div className=\"d-flex align-items-center justify-content-between p-3\">\r\n                                <div>\r\n                                    <b>User</b>\r\n                                    <div className=\"text-black-50\">Number of customers</div>\r\n                                </div>\r\n                                <div className=\"font-weight-bold text-success font-size-xl\">\r\n                                    {props.customers?.length}\r\n                                </div>\r\n                            </div>\r\n                            <Divider />\r\n                            <div className=\"d-flex align-items-center justify-content-between p-3\">\r\n                                <div>\r\n                                    <b>Deliveries</b>\r\n                                    <div className=\"text-black-50\">\r\n                                        Number of customer's deliveries\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"font-weight-bold text-warning font-size-xl\">\r\n                                    {totalDeliveries()}\r\n                                </div>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </Grid>\r\n\r\n                <Grid item xs={12} md={6}>\r\n                    <ExampleWrapperSimple sectionHeading=\"Stats\">\r\n                        <CustomersCharts customers={props.customers}/>\r\n                    </ExampleWrapperSimple>\r\n                </Grid>\r\n            </Grid>\r\n\r\n        </Fragment>\r\n    );\r\n}\r\n","import React, {Fragment, useEffect} from 'react';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nimport {\r\n    Avatar,\r\n    IconButton,\r\n    Box,\r\n    Card,\r\n    CardContent, Button, Tooltip\r\n} from '@material-ui/core';\r\n\r\nimport avatar2 from '../../assets/images/avatars/avatar2.jpg';\r\nimport {queryServerApi} from \"../../utils/queryServerApi\";\r\nimport {useHistory} from \"react-router\";\r\n\r\nexport default function CustomersTable(props) {\r\n    const history = useHistory();\r\n\r\n    const UpdateCustomer= (customer) =>{\r\n        history.replace(\"/UpdateCustomer/\"+ customer._id)\r\n    }\r\n    const Details= (id) =>{\r\n        history.replace(\"/CustomerDetails/\"+ id)\r\n    }\r\n\r\n\r\n\r\n\r\n    const deleteCustomer = async (id) => {\r\n        const [err] = await queryServerApi(\"customers/removeById/\" + id, {}, \"DELETE\");\r\n        if (err) {\r\n            console.log(err);\r\n        } history.go(0);\r\n    };\r\n\r\n    useEffect(()=>{\r\n        console.log(props.customers);\r\n    },[props.customers])\r\n\r\n\r\n    return (\r\n        <Fragment>\r\n            <Card className=\"card-box mb-4\">\r\n                <div className=\"card-header\">\r\n                    <div className=\"card-header--title\">\r\n                        <small>Tables</small>\r\n                        <b>Customers</b>\r\n                    </div>\r\n                    <Box className=\"card-header--actions\">\r\n                        <IconButton\r\n                            size=\"small\"\r\n                            color=\"primary\"\r\n                            className=\"text-primary\"\r\n                            title=\"View details\">\r\n                            <FontAwesomeIcon\r\n                                icon={['far', 'keyboard']}\r\n                                className=\"font-size-lg\"\r\n                            />\r\n                        </IconButton>\r\n                    </Box>\r\n                </div>\r\n                <CardContent className=\"p-0\">\r\n                    <div className=\"table-responsive\">\r\n                        <table className=\"table table-striped table-hover text-nowrap mb-0\">\r\n                            <thead className=\"thead-light\">\r\n                            <tr>\r\n                                <th style={{ width: '40%' }}>Customer</th>\r\n                                <th className=\"text-center\">Email</th>\r\n                                <th className=\"text-center\">Address</th>\r\n                                <th className=\"text-center\">Phone Number</th>\r\n                                <th className=\"text-center\">Actions</th>\r\n                                <th className=\"text-center\"></th>\r\n                            </tr>\r\n                            </thead>\r\n\r\n\r\n                            <tbody>\r\n\r\n                            {props.customers?.map((customer, index) => (\r\n                                <tr key={index}>\r\n                                    <td>\r\n                                        <div className=\"d-flex align-items-center\">\r\n                                            <Avatar alt=\"...\" src={process.env.REACT_APP_API_URL_UPLOADS + \"/\" + customer.img} className=\"mr-2\" />\r\n                                            <div>\r\n                                                <a\r\n                                                    href=\"#/\"\r\n                                                    onClick={e => e.preventDefault()}\r\n                                                    className=\"font-weight-bold text-black\"\r\n                                                    title=\"...\">\r\n                                                    {customer.FirstName} {customer.LastName}\r\n                                                </a>\r\n                                                     <span className=\"text-black-50 d-block\">\r\n                                                          CIN : {customer.Cin} | Username : {customer.UserName}\r\n                                                     </span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </td>\r\n\r\n                                    <td className=\"text-center\">\r\n                                        <div >\r\n                                            {customer.Email}\r\n                                        </div>\r\n                                    </td>\r\n\r\n                                    <td className=\"text-center\">\r\n                                        <div >\r\n                                            {customer.Adress.Street}, {customer.Adress.City}\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"text-center\">\r\n                                        <div >\r\n                                            {customer.PhoneNumber}\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"text-center\">\r\n                                        <Button\r\n                                            size=\"small\"\r\n                                            variant=\"contained\"\r\n                                            className=\"mr-3\"\r\n                                            color=\"primary\" onClick={() => UpdateCustomer(customer) }>\r\n                                            Update\r\n                                        </Button>\r\n                                        <Button size=\"small\" variant=\"contained\" color=\"secondary\" onClick={()=> deleteCustomer(customer._id)}>\r\n                                            Delete\r\n                                        </Button>\r\n                                    </td>\r\n\r\n                                    <td className=\"text-center\">\r\n                                        <Tooltip arrow title=\"View Details\">\r\n                                            <IconButton\r\n                                                size=\"small\"\r\n                                                variant=\"outlined\"\r\n                                                color=\"primary\"\r\n                                                onClick={()=>Details(customer._id)}\r\n                                            >\r\n                                                <FontAwesomeIcon icon={['fas', 'arrow-right']} />\r\n\r\n                                            </IconButton>\r\n                                        </Tooltip>\r\n                                    </td>\r\n                                </tr>\r\n\r\n\r\n                            ))}\r\n\r\n\r\n\r\n\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n\r\n        </Fragment>\r\n    );\r\n}\r\n","import React, {Fragment, useEffect, useState} from 'react';\r\n\r\nimport {ExampleWrapperSeamless, PageTitle} from '../../layout-componentsBack';\r\nimport CustomersTable from \"../../components/back/CustomersTable\";\r\nimport CustomerStat from \"../../components/back/CustomerStat\";\r\nimport axios from \"axios\";\r\n\r\n\r\nexport default function Customers() {\r\n    const [customers,setCustomers] = useState([]);\r\n\r\n    const getCustomers= async () => {\r\n        try {\r\n            const Customers = await axios.get(\r\n                \"https://wamya-backend.herokuapp.com/customers/\"\r\n            ).then(function(doc){\r\n                if(JSON.stringify(doc.data) === JSON.stringify(customers))\r\n                {\r\n                    console.log(\"same\")\r\n                }\r\n                else{\r\n                    setCustomers(doc.data)\r\n                    console.log(doc.data);\r\n                    console.log(customers);\r\n                }\r\n            });\r\n            // set State\r\n        } catch (err) {\r\n            console.error(err.message);\r\n        }\r\n    };\r\n    useEffect(() => {\r\n        getCustomers();\r\n        const interval = setInterval(() => {\r\n            getCustomers();\r\n        }, 2000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    return (\r\n        <Fragment>\r\n            <PageTitle\r\n                titleHeading=\"Customers\"\r\n                titleDescription=\"Wonderful animated charts built with ApexCharts components.\"\r\n            />\r\n            <ExampleWrapperSeamless sectionHeading=\"Customers Table\">\r\n                <CustomersTable customers={customers}/>\r\n                <CustomerStat customers={customers}/>\r\n            </ExampleWrapperSeamless>\r\n        </Fragment>\r\n    );\r\n}\r\n"],"sourceRoot":""}